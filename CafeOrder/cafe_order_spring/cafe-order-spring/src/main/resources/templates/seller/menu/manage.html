<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>판매자 판매 메뉴 관리</title>
    <script>
        // 전체 선택
        function selectAll() {
            const checkboxes = document.querySelectorAll('input[name="menuIds"]');
            checkboxes.forEach(cb => cb.checked = true);
        }

        // 전체 해제
        function deselectAll() {
            const checkboxes = document.querySelectorAll('input[name="menuIds"]');
            checkboxes.forEach(cb => cb.checked = false);
        }
    </script>
</head>
<body>
<h1>판매 메뉴 관리</h1>

<!--Store 정보 표시 -->
<div th:if="${store != null}">
    <h2 th:text="${store.name}">강남점</h2>
    <p>지점 ID: <span th:text="${store.id}">1</span></p>
</div>

<p>판매할 메뉴를 선택하세요. 체크된 메뉴만 고객에게 표시됩니다.</p>

<form method="post" th:action="@{/seller/menus/apply}">
    <table border="1">
        <thead>
        <tr>
            <th>판매</th>
            <th>메뉴명</th>
            <th>가격</th>
            <th>카테고리</th>
            <th>설명</th>
        </tr>
        </thead>
        <tbody>
        <!-- 메뉴가 없을 때-->
        <tr th:if="${#lists.isEmpty(allMenus)}">
            <td colspan="5">등록된 메뉴가 없습니다.</td>
        </tr>

        <!-- 메뉴 목록-->
        <tr th:each="menu : ${allMenus}">
            <td>
                <input type="checkbox"
                       name="menuIds"
                       th:value="${menu.id}"
                       th:checked="${sellingMenuIds.contains(menu.id)}">
            </td>
            <td th:text="${menu.name}">아메리카노</td>
            <td th:text="${menu.price} + '원'">3000원</td>
            <td th:text="${menu.category.displayName}">커피</td>
            <td th:text="${menu.description != null ? menu.description : '-'}">맛있는 커피</td>
        </tr>
        </tbody>
    </table>

    <div>
        <button type="submit">적용하기</button>
        <button type="button" onclick="selectAll()">전체 선택</button>
        <button type="button" onclick="deselectAll()">전체 해제</button>
        <a href="/seller/dashboard">판매자 메뉴로 돌아가기</a>
    </div>

</form>

</body>
</html>
